

## 第五次会议 2019-05-28（第二次迭代）

### 会议人员

全员参与

### 会议内容

- [集成测试](#前后端集成测试)
- [系统改进](#现有系统改进)
- [通知系统设计](#通知系统讨论)
- [货币系统设计](#货币系统讨论)
- [阶段分工](#任务看板更新（第三次会议）)

### 前后端集成测试

- 将前一阶段完成单元测试的用户系统、任务系统进行集成
  - 前端页面按钮绑定api请求，将用户输入、token信息一并打包入request发送给后端
  - 后端接受request，处理后将结果/报错信息打包入response并返回
  - 前段获得response后解包，并执行相应操作（页面跳转/错误信息提示等等）

### 现有系统改进

- 代码改进
  - 为符合restful api风格要求，为所有的api接口添加'/api'前缀
  - 为符合restful api风格要求，服务端不使用session维持用户登录状态，而是在每次请求时用户token验证其身份

- 功能增加

  - 添加邮箱真实性检测的功能

  - 添加通知系统，为用户生成通知，详情见[通知系统讨论](#通知系统讨论)

  - 添加货币系统，详情见[货币系统讨论](#货币系统讨论)

### 通知系统讨论

- 通知方式：
  - 用户登录时通知其未读消息条数（仅用数字表示）
  - 用户点击阅读未读消息时返回具体通知，通知产生情形如下文

- 问卷通知：
  - 问卷填完时通知发布人
  - 问卷任务到了截止时间通知发布人

- 其他任务通知：

  - 发布人：有人接单时通知发布人；

  - 接收人：发布人确定订单完成时通知接单人(通知其查看赏金获取情况，赏金通过系统自动划扣)；

  - 到了任务截止时间，双方仍未确认任务完成，则通知双方任务未完成
  - 接受者在一定时限内放弃任务时，通知发布者

### 货币系统讨论

- 货币产生：
  - 用户注册赠送一定虚拟货币
- 货币使用
  - 创建问卷/快递代取等任务，创建任务时，首先判断该用户余额是否超过'单份赏金*份数'，如果是，才允许创建
- 货币赚取
  - 接受问卷/快递代取任务
  - 问卷任务填写完成后点击提交即可获取

### 任务看板更新
 Todo：
  - 后端通知系统编写 —- 彭靖寒
  - 后端货币系统编写 —- 欧穗新
  - 前端通知页面编写 —- 彭流生
  - 通知系统、货币系统用例编写&测试 —- 潘鉴
- Done：
  - 第三次会议讨论（初次迭代开始）
- In progress：
  - 前后端链接代码编写&集成测试 —- 欧阳梓轩&彭伟林
