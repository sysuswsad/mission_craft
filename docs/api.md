

# Weclome to ApiDoc
----
<!-- TOC -->
- [简介](#简介)
- [模板](#模板)       
- [用户接口](#用户接口)       
    - [获取邮箱验证码](#获取邮箱验证码)     
    - [用户注册](#用户注册)      
    - [用户登录](#用户登录)        
    - [退出登录](#退出登录)        
    - [得到个人信息](#得到个人信息)        
    - [修改个人信息](#修改个人信息)        
    - [上传头像](#上传头像)       
    - [得到头像](#得到头像)   
- [任务接口](#任务接口)
    - [得到任务信息](#得到任务信息)
    - [发布任务](#发布任务)
- [订单接口](#订单接口)        
    - [查询个人订单](#查询个人订单)
    - [创建个人订单](#创建个人订单)
    - [确认个人订单](#确认个人订单)
- [通知接口]()
    - [查询通知信息(待完善)]()
    - [修改已读状态(待完善)]()

<!-- /TOC -->

## 简介

> 这是初步设定的接口，将会在开发过程前后端交互中逐步完善。



----
## 模板
### 
**请求地址**
```
//
```
**HTTP方法**

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|

**返回示例**
```json
{
    "staus" : 200,
    "data" : {
        
    },
    "message": "ok"
}
```


---
---
## 用户接口
### 获取邮箱验证码

**请求地址**
```
/email_confirm/
```

**HTTP方法**

POST

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
email|是|123@qq.com|用于接收验证码的邮箱|


**返回示例**
```json
{
    "staus" : 200,
    "message": "ok"
}
```
---
### 用户注册

**请求地址**
```
/users/
```
**HTTP方法**

POST

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
name|是|pj|用户名
sid|是|16340000|学号
phone|是|123456789|电话号码
password|是|123456|密码
code|是|1234|手机接收的验证码

**返回示例**
```json
{
    "staus" : 201,
    "message": "ok"
}
```
----


### 用户登录

登录以获得token，使用token来验证用户信息。

**请求地址**

```
/token/
```

**HTTP方法**

POST

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
name|否|pj|用户昵称
email|否|123@qq.com|注册的邮箱|以上两个必须有一个|
password|是|123456|登录密码

**返回示例**
```json
{
    "staus" : 201,
    "data" : {
        "code" : 1234
    },
    "message": "ok"
}
```
---
### 退出登录

**请求地址**
```
/token/
```
**HTTP方法**

DELETE

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录时获得的token

**返回示例**
```json
{
    "staus" : 200,
    "message": "ok"
}
```
---
### 得到个人信息

**请求地址**
```
/users/
```
**HTTP方法**

GET

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录时所获得的token

**返回示例**
```json
{
    "staus" : 200,
    "data" : {
        "name" : "pj",
        "sid" : "16040000",
        "email" : "123@qq.com",
        "avatar" : "\..\..",
        "university" : "中山大学",
        "school": "数据院",
        "grade": "大三",
        "sex" : "男",
        "QQ": "90379",
        "wechat" : "90379",
        "mission_pub_num": 10,
        "mission_fin_num": 10
    },
    "message": "ok"
}
```

---
### 修改个人信息
**请求地址**
```
/users/
```

**HTTP方法**
PUT

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录所返回的token
name|否|pj|修改的用户名
sid|否|16340000|修改的学号
email|否|123@qq.com|修改的邮箱
university|否|大山中学|修改的学校
school|否|学院|修改的学院
grade|否|大三|修改的年级
gender|否|男|修改的性别(男或女)
qq|否|90317|qq号
wechat|否|90325|微信号

**返回示例**
```json
{
    "staus" : 200,
    "message": "ok"
}
```
---
### 上传头像
**请求地址**
```
/avatar/
```

**HTTP方法**

POST

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录所返回的token
image|是||上传头像文件(type=file),仅允许.jpg,.jpeg,.png类型

**返回示例**
```json
{
    "staus" : 200,
    "data" : {
        "avator" : "\..\.."
    },
    "message": "ok"
}
```
---
### 得到头像

**请求地址**
```
/avatar/
```

**HTTP方法**

GET

**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录所返回的token

**返回示例**
```json
{
    "staus" : 200,
    "data" : {
        "avator" : "www.domain.com/image/.."
    },
    "message": "ok"
}
```

---
---

## 任务接口
### 得到任务信息
根据传递的参数获得所需的功能
- 任务广场所使用的API，返回待领取的任务。使用游标分页设计，返回特定时间后的任务清单,不必提供token
- 返回个人领取或发布的任务，需要提供token
- 返回某个任务的具体信息，需要提供mission id


**请求地址**
```
/missions/
```
**HTTP方法**
GET 
**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
create_time|否|2019-5-1 14:40:20|返回该时间后的任务
limit|否|10|返回的最大条数
type|否|0或1或2|分别代表问卷、其他和无类型
bounty|否|10|最低报酬
token|否|123|查询关于个人的接收和发布任务就需要
publish|否|1|返回个人发布的任务
receive|否|1|返回个人领取的任务
mission_id|否|返回某个的任务


**返回示例**
```json
{
    "staus" : 200,
    "data" : {
        "missions" : [
            {
            "mission_id": 10, 
            "create_time":"2019-5-1 14:40:20",
            "deadline": "2019-6-1 14:40:20",
            "title":"标题", 
            "description":"描述",
            "detail":"详情",
            "bounty":10,
            "max_num":10,
            "rcv_num":5,
            "fin_num":2,
            "type":0, 
            "publisher_id":10, 
            "avatar":"www.domain.com/imgage/.."
            },
            ...

        ],
        "bottom": true,   
    },   
    "message": "ok"
}
```
---

### 发布任务
**请求地址**
```
/mission/
```
**HTTP方法**
POST
**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录返回的token|
type|是|类型|0表示问卷，1表示其他
deadline|是|结束时间|
title|是|"标题1"|标题
descrption|是|"描述"|任务描述|
detail|是|"详情"|任务详情|
bounty|是|100|赏金
max_num|否|10|最大接收人,默认为1
problems|否|待定|以数组形式上传

**返回示例**
```json
{
    "staus" : 200,
    "message": "ok"
}
```



---
---
## 订单接口

### 查询个人订单

**请求地址**
```
/orders/
```
**HTTP方法**
GET
**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录时所用的token
publish|否|1|个人作为发布者的订单
receive|否|1|个人作为接收者的订单，两者为1表示都返回

**返回示例**
```json
{
    "staus" : 200,
    "data" : {
        "orders" : [{
            "order_id" : 1,
            "receiver_id": 123,
            "publisher_id": 124,
            "order_state": 1,
            "publisher_confirm":1,
            "receiver_confirm": 1,
            "receive_time": "2019-6-1 14:40:20",
            "finish_time": "2019-6-1 14:40:20",
            
        },...
        ]
    },
    "message": "ok"
}
```
----

### 创建个人订单
**请求地址**
```
/orders/
```
**HTTP方法**
POST
**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录时所用的token
mission_id|是|123|任务id

**返回示例**
```json
{
    "staus" : 200,
    "message": "ok"
}
```
---
### 确认个人订单
**请求地址**
```
/orders/
```
**HTTP方法**
PUT
**请求参数**

参数名 | 是否必须 | 示例值 | 描述
--|--|--|--|
token|是|123|登录时所用的token
order_id|是|123|订单id

**返回示例**
```json
{
    "staus" : 200,
    "message": "ok"
}
```
