# 测试报告

## 编写目的
本测试报告为Mission Craft系统的后端测试报告，目的在于总结测试阶段的测试双及分析测试结果，描述系统是否符合需求。预期参考人员包括用户、测试人员、开发人员、项目管理者、其他质量管理人员。

## 测试概要

测试用例的编写使用等价类划分的设计方法，使用pytest测试工具，对后端的API进行测试。测试环境：PC、Windows10系统、python3.7

## 测试用例的设计

测试号|接口|用例|基本要求|用例数|是否通过|
--|--|--|--|--|--|
1|user|注册|使用邮箱、用户名、学生id、密码注册，邮箱、用户名和学生id要唯一|1|是|
2|user|注册已注册过的邮箱|不能注册，邮箱是唯一的|1|是|
3|user|注册已注册过的名字|不能注册，名字是唯一的|1|是|
4|user|使用错误格式的邮箱注册|不能注册，要求使用教育邮箱|1|是|
5|user|没有提供用户名注册|不能注册，必须要用户名|1|是|
6|user|没有提供邮箱注册|不能注册，必须要邮箱|1|是|
7|user|没有提供密码|不能注册，必须要密码|1|是|
8|user|没有提供学生id|不能注册，必须有学生id|1|是|
9|user|输入的注册验证码错误|不能注册，不能验证用户的身份|1|是|
10|user|注册已注册过的学生id|不能注册，学生id是唯一|1|是|
11|user|使用正确的邮箱和密码登录|登录成功|1|是|
12|user|使用正确的用户名登录|登录成功|1|是|
13|user|没有提供用户名或邮箱|登录失败，必须提供|1|是|
14|user|没有提供密码|登录失败，必须密码登录|1|是|
15|user|使用不存在的用户名|登录失败|2|是|
16|user|使用错误的密码|登录失败|1|是|
17|user|使用未注册的邮箱|登录失败|1|是|
18|user|登录后得到用户信息|成功得到|2|是|
19|user|未登录情况下得到用户信息|返回401未授权，没有权限|1|是|
20|user|登录后得到用户头像|返回401未授权，没有权限|1|是|
21|user|登录后更新用户信息|成功修改|1|是|
22|user|登录后修改用户的密码|原密码要正确|1|是|
23|user|登录后修改用户的密码时旧密码错误|不能修改|1|是|
24|user|登录后修改用户的密码没有提供旧密码|不能修改|2|是|
25|user|登录后修改用户的密码没有提供新密码|不能修改|1|是|
26|user|登录后上传用户头像|类型只能是.jpg和.png|1|是|
27|user|登录后上传.txt作为用户头像|不能上传|1|是|
28|user|登录后请求头像|返回头像url|1|是|
29|user|登录后请求头像是不存在的|返回错误|1|是|
30|mission|发布任务|需要提供必要的信息|5|是|
31|mission|发布任务没有提供类型|需要提供必要的信息|1|是|
32|mission|发布任务没有提供deadline|需要提供必要的信息1|是|
33|mission|发布任务没有提供标题|需要提供必要的信息|1|是|
34|mission|发布任务没有提供描述|需要提供必要的信息|1|是|
35|mission|发布任务没有提供联系方式|需要提供必要的信息|1|是|
36|mission|发布任务没有提供报酬|需要提供必要的信息|2|是|
37|mission|发布问卷任务没有提供最大数量|需要提供必要的信息|1|是|
38|mission|发布问卷任务没有提供问题|需要提供必要的信息|1|是|
39|mission|发布问卷任务没有提供正确问题格式|需要提供正确的格式|3|是|
40|mission|通过mission_id得到自己发布的任务信息|正确得到|1|是|
41|mission|通过mission_id试图得到不是自己发布的任务信息|不能返回，未授权|1|是|
42|mission|通过deadline筛选得到任务信息|正确得到|1|是|
43|mission|通过类型筛选得到任务任务|正确得到|2|是|
44|mission|问卷发布者取消未被领取的任务|能取消|2|是|
45|mission|其他类型发布者取消未被领取的任务|能取消|2|是|
46|mission|其他类型发布者取消被领取的任务|不能取消|2|是|
47|mission|问卷发布者取消被领取的任务|能取消|1|是|
48|mission|取消别人发布的mission|不能取消，未授权|2|是|
49|order|得到订单信息|只有本人能查|5|是|
50|order|得到别人的订单信息|不能得到，只有本人能查|1|是|
51|order|完成订单|问卷提交即完成，快递要发布者点完成|1|是|
52|order|确认订单时|只有本人能查|1|是|
53|order|确认订单的信息与操作人不符|只有本人能确认|1|是|
54|order|创建订单|提供任务号和其他基本信息，任务状态满足条件|8|是|
55|order|创建订单没有任务号|不能创建，需要提供任务号和其他基本信息|1|是|
56|order|创建订单时任务过期|不能创建|1|是|
57|order|创建订单时任务取消|不能创建|1|是|
58|order|创建订单时任务达最大数量|不能创建|1|是|
59|notification|登录时返回通知内容|返回正确的通知数量和类型|1|是|
60|notification|任务完成时生成通知|返回正确的通知和类型|1|是|
61|notification|任务取消时生成通知|返回正确的通知和类型|1|是|
62|notification|任务过期时生成通知|返回正确的通知和类型|1|是|
63|notification|发布的任务被领取时生成通知|返回正确的通知和类型|1|是|
64|notification|钱到账时生成通知|返回正确的通知和类型|1|是|
65|user|登录后更新用户的邮箱是已注册过的|不能修改，邮箱是唯一的|1|是|
66|user|登录后更新用户的学生id是已注册过的|不能修改，学生id是唯一的|1|是|
67|user|登录后更新用户的用户名是已注册过的|不能修改，用户名是唯一的|1|是|
68|user|输入的注册验证码过期|不能注册，不能验证用户的合法性|1|是|
69|user|输入的注册验证码过期|不能注册，不能验证用户的合法性|1|是|



## 覆盖分析

使用pytest生成覆盖测试报告，在htmlcov文件夹下。

从生成的报告看，总的测试覆盖率达62%。

![](https://github.com/sysuswsad/mission_craft/raw/master/docs/imgs/cov.png)

从报告中点进具体的代码文件，可以看到有哪些语句没有覆盖。有些语句是没必要测试或者无法测试的。

![](https://github.com/sysuswsad/mission_craft/raw/master/docs/imgs/user_cov.png)

## 测试结论

我们在用户现场环境下进行功能、可靠性、安全性、可用性、兼容性等方面进行了全面、严格、规范的测试，测试结果表明：MissionCraft基本达到业务需求文档中的要求。并具有以下特点：

1. 系统架构先进、简单。该系统采用先进的B/S架构，系统结构清晰明确。
2. 功能全面。
3. 系统安全性好。系统具有严格的权限设置功能，不同权限的人只能看到自己有权限访问的字段内容，有效地保证了数据的安全性。
4. 系统设置灵活。该软件完全基于工作流程进行，
5. 系统可靠性高。对于用户输入不符合要求的数据，给出简洁、明准确的提示信息，必要时给出了帮助。
6. 系统兼容性好。系统设计灵活，能满足用户在各种操作系统，各种web应用服务器。



